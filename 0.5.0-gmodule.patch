--- origsrc/notification-daemon-0.5.0/src/capplet/notification-properties.c	2010-05-28 09:41:17.000000000 -0500
+++ src/notification-daemon-0.5.0/src/capplet/notification-properties.c	2010-06-29 05:01:17.586290400 -0500
@@ -22,6 +22,7 @@
 
 #include <glib/gi18n.h>
 #include <glib.h>
+#include <gmodule.h>
 #include <gtk/gtk.h>
 #include <gconf/gconf-client.h>
 #include <string.h>
@@ -253,7 +254,7 @@ get_theme_name (const gchar *filename)
 
         /* TODO: Remove magic numbers. Strip "lib" and ".so" */
         result = g_strdup (filename + 3);
-        result[strlen (result) - 3] = '\0';
+        result[strlen (result) - strlen("."G_MODULE_SUFFIX)] = '\0';
         return result;
 }
 
@@ -283,8 +284,7 @@ notification_properties_dialog_setup_the
 
         if ((dir = g_dir_open (ENGINES_DIR, 0, NULL))) {
                 while ((filename = g_dir_read_name (dir))) {
-                        if (g_str_has_prefix (filename, "lib")
-                            && g_str_has_suffix (filename, ".so")) {
+                        if (g_str_has_suffix (filename, "."G_MODULE_SUFFIX)) {
 
                                 theme_name = get_theme_name (filename);
 
--- origsrc/notification-daemon-0.5.0/src/daemon/engines.c	2010-06-24 01:41:42.000000000 -0500
+++ src/notification-daemon-0.5.0/src/daemon/engines.c	2010-06-29 04:59:03.173602400 -0500
@@ -76,12 +76,9 @@ static ThemeEngine *
 load_theme_engine (const char *name)
 {
         ThemeEngine    *engine;
-        char           *filename;
         char           *path;
 
-        filename = g_strdup_printf ("lib%s.so", name);
-        path = g_build_filename (ENGINES_DIR, filename, NULL);
-        g_free (filename);
+        path = g_module_build_path (ENGINES_DIR, name);
 
         engine = g_new0 (ThemeEngine, 1);
         engine->ref_count = 1;
@@ -132,7 +129,7 @@ load_theme_engine (const char *name)
 
  error:
         if (engine->module != NULL && !g_module_close (engine->module))
-                g_warning ("%s: %s", filename, g_module_error ());
+                g_warning ("%s: %s", name, g_module_error ());
 
         g_free (engine);
         return NULL;
--- origsrc/notification-daemon-0.5.0/src/themes/slider/Makefile.am	2010-05-28 09:41:17.000000000 -0500
+++ src/notification-daemon-0.5.0/src/themes/slider/Makefile.am	2010-06-29 04:59:19.965562900 -0500
@@ -7,7 +7,7 @@ AM_CPPFLAGS = $(THEME_CFLAGS)
 
 libslider_la_SOURCES = theme.c
 
-libslider_la_LDFLAGS = -module -avoid-version
+libslider_la_LDFLAGS = -module -avoid-version -no-undefined
 libslider_la_LIBADD =	\
 	$(THEME_LIBS)	\
 	$(NULL)
--- origsrc/notification-daemon-0.5.0/src/themes/standard/Makefile.am	2010-05-28 09:41:17.000000000 -0500
+++ src/notification-daemon-0.5.0/src/themes/standard/Makefile.am	2010-06-29 04:59:26.332927100 -0500
@@ -3,7 +3,7 @@ enginedir = $(libdir)/notification-daemo
 engine_LTLIBRARIES = libstandard.la
 
 libstandard_la_SOURCES = theme.c
-libstandard_la_LDFLAGS = -module -avoid-version
+libstandard_la_LDFLAGS = -module -avoid-version -no-undefined
 libstandard_la_LIBADD  = $(NOTIFICATION_DAEMON_LIBS)
 
 INCLUDES = $(NOTIFICATION_DAEMON_CFLAGS)
